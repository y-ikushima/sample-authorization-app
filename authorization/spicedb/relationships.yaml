# SpiceDB リレーションシップ定義
# 新しい認可条件に基づく設定

relationships:
  # グローバル管理者設定（Admin - フルアクセス）
  - resource: "global:main"
    relation: "admin"
    subject: "user:taro"

  # システムリソースの権限設定（ユーザは複数のシステムに所属可能）
  # jiro - system1とsystem2のオーナー
  - resource: "system:system1"
    relation: "owner"
    subject: "user:jiro"

  - resource: "system:system2"
    relation: "owner"
    subject: "user:jiro"

  # saburo - system1とsystem3のマネージャー
  - resource: "system:system1"
    relation: "manager"
    subject: "user:saburo"

  - resource: "system:system3"
    relation: "manager"
    subject: "user:saburo"

  # hanako - system2とsystem3のスタッフ
  - resource: "system:system2"
    relation: "staff"
    subject: "user:hanako"

  - resource: "system:system3"
    relation: "staff"
    subject: "user:hanako"

  # AWSの権限設定（システム権限とは完全に独立）
  # システムでのロールに関係なく、AWS権限は個別に付与される
  # jiro - aws1のオーナー
  - resource: "aws:aws1"
    relation: "owner"
    subject: "user:jiro"

  # saburo - aws1のマネージャー（システムでの権限とは無関係）
  - resource: "aws:aws1"
    relation: "manager"
    subject: "user:saburo"

  # hanako - aws1のスタッフ（システムでの権限とは無関係）
  - resource: "aws:aws1"
    relation: "staff"
    subject: "user:hanako"

  # AWSとシステムの関係設定（所属関係のみ、権限には影響しない）
  - resource: "aws:aws1"
    relation: "system"
    subject: "system:system1"
